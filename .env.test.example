# DictateMED E2E Test Environment Variables
# Copy this file to .env.test and fill in your values
#
# This file contains configuration for running E2E tests.
# All test data uses TEST- prefix identifiers to prevent PHI contamination.

# ===================
# Test Database
# ===================
# Use a separate database for E2E tests to avoid contaminating dev/prod data.
# Recommended: Create a database named "dictatemed_e2e_test"
DATABASE_URL="postgresql://user:password@localhost:5432/dictatemed_e2e_test"

# ===================
# E2E Test Authentication
# ===================
# Test user credentials for Auth0 login during E2E tests.
# Create a dedicated test user in Auth0 with email: test.cardiologist+e2e@dictatemed.dev
E2E_TEST_USER_EMAIL="test.cardiologist+e2e@dictatemed.dev"
E2E_TEST_USER_PASSWORD="[your-test-user-password]"

# Optional: Mock auth token for API-level tests (bypasses Auth0)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
E2E_MOCK_AUTH_TOKEN=""

# ===================
# Auth0 (Same as main .env)
# ===================
AUTH0_SECRET="[generate-random-32-bytes]"
AUTH0_BASE_URL="http://localhost:3000"
AUTH0_ISSUER_BASE_URL="https://your-tenant.auth0.com"
AUTH0_CLIENT_ID="your-client-id"
AUTH0_CLIENT_SECRET="your-client-secret"

# ===================
# PHI Encryption
# ===================
# Required for patient data encryption in tests.
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# IMPORTANT: Use a DIFFERENT key for tests than production!
PHI_ENCRYPTION_KEY="[generate-32-byte-random-base64]"

# ===================
# AWS Bedrock (Mock for Tests)
# ===================
# For E2E tests, you can either:
# 1. Use real AWS credentials (costs money, slower)
# 2. Mock the Bedrock service (faster, free)
#
# To mock, set MOCK_BEDROCK_SERVICE=true
MOCK_BEDROCK_SERVICE="true"

# Real credentials (optional, only needed if MOCK_BEDROCK_SERVICE=false)
AWS_REGION="ap-southeast-2"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
BEDROCK_OPUS_MODEL_ID="anthropic.claude-opus-4-20250514-v1:0"
BEDROCK_SONNET_MODEL_ID="anthropic.claude-sonnet-4-20250514-v1:0"

# ===================
# Supabase (Mock for Tests)
# ===================
# For E2E tests, you can mock Supabase storage.
MOCK_SUPABASE_STORAGE="true"

# Real credentials (optional, only needed if MOCK_SUPABASE_STORAGE=false)
NEXT_PUBLIC_SUPABASE_URL=""
NEXT_PUBLIC_SUPABASE_ANON_KEY=""
SUPABASE_SERVICE_ROLE_KEY=""

# ===================
# Deepgram (Mock for Tests)
# ===================
# For E2E tests, mock the transcription service.
MOCK_DEEPGRAM_SERVICE="true"

# Real credentials (optional)
DEEPGRAM_API_KEY=""
DEEPGRAM_WEBHOOK_URL=""
DEEPGRAM_WEBHOOK_SECRET=""

# ===================
# Email (Mock for Tests)
# ===================
# For E2E tests, mock the email service to avoid sending real emails.
MOCK_EMAIL_SERVICE="true"

# Real credentials (optional)
RESEND_API_KEY=""
RESEND_FROM_EMAIL="noreply@test.dictatemed.dev"
RESEND_WEBHOOK_SECRET=""

# ===================
# Feature Flags
# ===================
ENABLE_HALLUCINATION_CHECK="true"
ENABLE_STYLE_LEARNING="true"

# ===================
# Application
# ===================
NEXT_PUBLIC_APP_URL="http://localhost:3000"
NODE_ENV="test"

# ===================
# Playwright Configuration
# ===================
# Base URL for tests (default: http://localhost:3000)
PLAYWRIGHT_BASE_URL="http://localhost:3000"

# Headless mode (true for CI, false for local debugging)
PLAYWRIGHT_HEADLESS="true"

# Slow motion for debugging (milliseconds between actions)
# PLAYWRIGHT_SLOW_MO="0"

# Test timeout in milliseconds
PLAYWRIGHT_TIMEOUT="30000"

# ===================
# CI/CD Configuration
# ===================
# Set to "true" when running in CI environment
CI="false"

# GitHub Actions specific
# GITHUB_ACTIONS=""
# GITHUB_RUN_ID=""

# ===================
# Test Data Configuration
# ===================
# Prefix for all test data identifiers (ensures easy cleanup)
TEST_DATA_PREFIX="TEST-"

# Test practice name
TEST_PRACTICE_NAME="TEST-PRACTICE-E2E Sydney Heart Specialists"

# Test patient MRNs
TEST_PATIENT_HF_MRN="TEST-HF-001"
TEST_PATIENT_PCI_MRN="TEST-PCI-002"

# ===================
# Logging (Optional)
# ===================
# Set to "debug" for verbose test logging
LOG_LEVEL="warn"

# Enable Playwright trace on failure
PLAYWRIGHT_TRACE_ON_FAILURE="true"

# Enable screenshots on failure
PLAYWRIGHT_SCREENSHOT_ON_FAILURE="true"

# Enable video recording on failure
PLAYWRIGHT_VIDEO_ON_FAILURE="true"
