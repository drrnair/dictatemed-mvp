# DictateMED MVP Environment Variables
# Copy this file to .env.local and fill in your values

# ===================
# Database
# ===================
DATABASE_URL="postgresql://user:password@localhost:5432/dictatemed"

# ===================
# Auth0
# ===================
AUTH0_SECRET="[generate-random-32-bytes]"
AUTH0_BASE_URL="http://localhost:3000"
AUTH0_ISSUER_BASE_URL="https://your-tenant.auth0.com"
AUTH0_CLIENT_ID="your-client-id"
AUTH0_CLIENT_SECRET="your-client-secret"

# ===================
# AWS (for Bedrock AI only - S3 removed, using Supabase Storage)
# ===================
# AWS credentials are used ONLY for AWS Bedrock (Claude AI models).
# File storage has been migrated to Supabase Storage.
AWS_REGION="ap-southeast-2"
AWS_ACCESS_KEY_ID="your-access-key"
AWS_SECRET_ACCESS_KEY="your-secret-key"

# ===================
# Supabase (Storage & Database)
# ===================
# Get these from: Supabase Dashboard → Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-public-key"
# WARNING: Never expose service role key to client. Server-side only.
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# ===================
# Deepgram
# ===================
DEEPGRAM_API_KEY="your-api-key"
DEEPGRAM_WEBHOOK_URL="https://your-domain.com/api/transcription/webhook"
DEEPGRAM_WEBHOOK_SECRET="your-webhook-secret"

# ===================
# AWS Bedrock Models
# ===================
# Optional: Override default model IDs if needed
# Defaults in code: claude-opus-4 and claude-sonnet-4
# Check AWS Bedrock console for available models in your region
BEDROCK_OPUS_MODEL_ID="anthropic.claude-opus-4-20250514-v1:0"
BEDROCK_SONNET_MODEL_ID="anthropic.claude-sonnet-4-20250514-v1:0"

# ===================
# Patient Data Encryption
# ===================
# Generate with: openssl rand -base64 32
PHI_ENCRYPTION_KEY="[generate-32-byte-random-base64]"

# ===================
# Feature Flags
# ===================
ENABLE_HALLUCINATION_CHECK="true"
ENABLE_STYLE_LEARNING="true"
# Extended upload types: Enable support for images (JPEG, PNG, HEIC), Word docs (DOCX), and RTF
# When disabled, only PDF and TXT files are accepted
# NOTE: Uses NEXT_PUBLIC_ prefix to work in both client and server components
NEXT_PUBLIC_FEATURE_EXTENDED_UPLOAD_TYPES="false"

# ===================
# Resend (Email)
# ===================
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY="re_your-api-key"
# Verified sender email (must be verified in Resend dashboard)
RESEND_FROM_EMAIL="noreply@dictatemed.com"
# REQUIRED in production: Webhook signing secret for Svix signature verification
# Get from Resend Dashboard -> Webhooks -> Your webhook -> Signing Secret
# Format: whsec_xxxxxxxxxxxxxxxxxxxx (starts with "whsec_")
# See: https://resend.com/docs/dashboard/webhooks/verify-webhooks
RESEND_WEBHOOK_SECRET=""

# ===================
# Application
# ===================
# Public URL of the application (used for webhooks, invite links)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ===================
# Upstash Redis (Rate Limiting)
# ===================
# OPTIONAL: For distributed rate limiting across serverless instances
# Without this, rate limiting uses in-memory store (works for single instance only)
# Get credentials from: https://console.upstash.com/redis
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""

# ===================
# Error Tracking (Sentry)
# ===================
# RECOMMENDED for production: Get DSN from https://sentry.io
# Setup steps:
#   1. Create a Sentry project (Next.js)
#   2. Run: npm install @sentry/nextjs
#   3. Run: npx @sentry/wizard@latest -i nextjs
#   4. Copy DSN here
# PHI is automatically filtered before sending to Sentry.
NEXT_PUBLIC_SENTRY_DSN=""

# ===================
# Logging (Optional)
# ===================
# Log level: debug, info, warn, error (default: info in production, debug in dev)
# LOG_LEVEL="info"
# Custom error logging endpoint (fallback when Sentry not configured)
# NEXT_PUBLIC_ERROR_LOGGING_ENDPOINT=""

# ===================
# Development Only
# ===================
# Set to "development" for local, "production" for deployed
NODE_ENV="development"

# ===================
# Testing (Optional)
# ===================
# For running smoke tests
# SMOKE_TEST_LIVE="false"
# SMOKE_TEST_VERBOSE="false"
# SMOKE_TEST_EMAIL="test@example.com"
